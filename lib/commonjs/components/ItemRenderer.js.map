{"version":3,"names":["_react","_interopRequireDefault","require","_reactNativeReanimated","_BaseLayout","_useVisibleRanges","_computedWithAutoFillData","e","__esModule","default","ItemRenderer","props","data","size","windowSize","handlerOffset","offsetX","dataLength","rawDataLength","loop","autoFillData","layoutConfig","renderItem","customAnimation","visibleRanges","useVisibleRanges","total","viewSize","translation","displayedItems","setDisplayedItems","React","useState","useAnimatedReaction","value","ranges","runOnJS","createElement","Fragment","map","item","index","realIndex","computedRealIndexWithAutoFillData","negativeRange","positiveRange","shouldRender","BaseLayout","key","animationStyle","animationValue","exports"],"sources":["ItemRenderer.tsx"],"sourcesContent":["import React from \"react\";\nimport type { FC } from \"react\";\nimport type { ViewStyle } from \"react-native\";\nimport type Animated from \"react-native-reanimated\";\nimport { useAnimatedReaction, type AnimatedStyleProp, runOnJS } from \"react-native-reanimated\";\n\nimport type { TAnimationStyle } from \"./BaseLayout\";\nimport { BaseLayout } from \"./BaseLayout\";\n\nimport type { VisibleRanges } from \"../hooks/useVisibleRanges\";\nimport { useVisibleRanges } from \"../hooks/useVisibleRanges\";\nimport type { CarouselRenderItem } from \"../types\";\nimport { computedRealIndexWithAutoFillData } from \"../utils/computed-with-auto-fill-data\";\n\ninterface Props {\n  data: any[]\n  dataLength: number\n  rawDataLength: number\n  loop: boolean\n  size: number\n  windowSize?: number\n  autoFillData: boolean\n  offsetX: Animated.SharedValue<number>\n  handlerOffset: Animated.SharedValue<number>\n  layoutConfig: TAnimationStyle\n  renderItem: CarouselRenderItem<any>\n  customAnimation?: ((value: number) => AnimatedStyleProp<ViewStyle>)\n}\n\nexport const ItemRenderer: FC<Props> = (props) => {\n  const {\n    data,\n    size,\n    windowSize,\n    handlerOffset,\n    offsetX,\n    dataLength,\n    rawDataLength,\n    loop,\n    autoFillData,\n    layoutConfig,\n    renderItem,\n    customAnimation,\n  } = props;\n\n  const visibleRanges = useVisibleRanges({\n    total: dataLength,\n    viewSize: size,\n    translation: handlerOffset,\n    windowSize,\n    loop,\n  });\n\n  const [displayedItems, setDisplayedItems] = React.useState<VisibleRanges>(null!);\n\n  useAnimatedReaction(\n    () => visibleRanges.value,\n    ranges => runOnJS(setDisplayedItems)(ranges),\n    [visibleRanges],\n  );\n\n  if (!displayedItems)\n    return null;\n\n  return (\n    <>\n      {\n        data.map((item, index) => {\n          const realIndex = computedRealIndexWithAutoFillData({\n            index,\n            dataLength: rawDataLength,\n            loop,\n            autoFillData,\n          });\n\n          const { negativeRange, positiveRange } = displayedItems;\n\n          const shouldRender = (index >= negativeRange[0] && index <= negativeRange[1])\n          || (index >= positiveRange[0] && index <= positiveRange[1]);\n\n          if (!shouldRender)\n            return null;\n\n          return (\n            <BaseLayout\n              key={index}\n              index={index}\n              handlerOffset={offsetX}\n              visibleRanges={visibleRanges}\n              animationStyle={customAnimation || layoutConfig}\n            >\n              {({ animationValue }) =>\n                renderItem({\n                  item,\n                  index: realIndex,\n                  animationValue,\n                })\n              }\n            </BaseLayout>\n          );\n        })\n      }\n    </>\n  );\n};\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAIA,IAAAC,sBAAA,GAAAD,OAAA;AAGA,IAAAE,WAAA,GAAAF,OAAA;AAGA,IAAAG,iBAAA,GAAAH,OAAA;AAEA,IAAAI,yBAAA,GAAAJ,OAAA;AAA0F,SAAAD,uBAAAM,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAiBnF,MAAMG,YAAuB,GAAIC,KAAK,IAAK;EAChD,MAAM;IACJC,IAAI;IACJC,IAAI;IACJC,UAAU;IACVC,aAAa;IACbC,OAAO;IACPC,UAAU;IACVC,aAAa;IACbC,IAAI;IACJC,YAAY;IACZC,YAAY;IACZC,UAAU;IACVC;EACF,CAAC,GAAGZ,KAAK;EAET,MAAMa,aAAa,GAAG,IAAAC,kCAAgB,EAAC;IACrCC,KAAK,EAAET,UAAU;IACjBU,QAAQ,EAAEd,IAAI;IACde,WAAW,EAAEb,aAAa;IAC1BD,UAAU;IACVK;EACF,CAAC,CAAC;EAEF,MAAM,CAACU,cAAc,EAAEC,iBAAiB,CAAC,GAAGC,cAAK,CAACC,QAAQ,CAAgB,IAAK,CAAC;EAEhF,IAAAC,0CAAmB,EACjB,MAAMT,aAAa,CAACU,KAAK,EACzBC,MAAM,IAAI,IAAAC,8BAAO,EAACN,iBAAiB,CAAC,CAACK,MAAM,CAAC,EAC5C,CAACX,aAAa,CAChB,CAAC;EAED,IAAI,CAACK,cAAc,EACjB,OAAO,IAAI;EAEb,oBACE7B,MAAA,CAAAS,OAAA,CAAA4B,aAAA,CAAArC,MAAA,CAAAS,OAAA,CAAA6B,QAAA,QAEI1B,IAAI,CAAC2B,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK;IACxB,MAAMC,SAAS,GAAG,IAAAC,2DAAiC,EAAC;MAClDF,KAAK;MACLxB,UAAU,EAAEC,aAAa;MACzBC,IAAI;MACJC;IACF,CAAC,CAAC;IAEF,MAAM;MAAEwB,aAAa;MAAEC;IAAc,CAAC,GAAGhB,cAAc;IAEvD,MAAMiB,YAAY,GAAIL,KAAK,IAAIG,aAAa,CAAC,CAAC,CAAC,IAAIH,KAAK,IAAIG,aAAa,CAAC,CAAC,CAAC,IACxEH,KAAK,IAAII,aAAa,CAAC,CAAC,CAAC,IAAIJ,KAAK,IAAII,aAAa,CAAC,CAAC,CAAE;IAE3D,IAAI,CAACC,YAAY,EACf,OAAO,IAAI;IAEb,oBACE9C,MAAA,CAAAS,OAAA,CAAA4B,aAAA,CAACjC,WAAA,CAAA2C,UAAU;MACTC,GAAG,EAAEP,KAAM;MACXA,KAAK,EAAEA,KAAM;MACb1B,aAAa,EAAEC,OAAQ;MACvBQ,aAAa,EAAEA,aAAc;MAC7ByB,cAAc,EAAE1B,eAAe,IAAIF;IAAa,GAE/C,CAAC;MAAE6B;IAAe,CAAC,KAClB5B,UAAU,CAAC;MACTkB,IAAI;MACJC,KAAK,EAAEC,SAAS;MAChBQ;IACF,CAAC,CAEO,CAAC;EAEjB,CAAC,CAEH,CAAC;AAEP,CAAC;AAACC,OAAA,CAAAzC,YAAA,GAAAA,YAAA","ignoreList":[]}