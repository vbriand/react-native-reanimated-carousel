{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNativeReanimated","_constants","_computedWithAutoFillData","_dealWithAnimation","_handleroffsetDirection","_log","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","useCarouselController","options","size","loop","dataLength","handlerOffset","withAnimation","defaultIndex","duration","autoFillData","fixedDirection","dataInfo","React","useMemo","length","disable","originalLength","index","useSharedValue","sharedIndex","useRef","sharedPreIndex","currentFixedPage","useCallback","Math","round","value","fixed","abs","setSharedIndex","newSharedIndex","current","useAnimatedReaction","handlerOffsetValue","toInt","isPositive","newSharedIndexValue","convertToSharedIndex","rawDataLength","runOnJS","getCurrentIndex","realIndex","computedRealIndexWithAutoFillData","canSliding","onScrollEnd","_options$onScrollEnd","onScrollStart","_options$onScrollStar","scrollWithTiming","toValue","onFinished","callback","isFinished","defaultWithAnimation","type","config","easing","Easing","easeOutQuart","dealWithAnimation","next","opts","count","animated","nextPage","prev","prevPage","to","direction","handlerOffsetDirection","offset","totalSize","isCloseToNextLoop","finalOffset","floor","scrollTo","getSharedIndex"],"sources":["useCarouselController.tsx"],"sourcesContent":["import React, { useRef } from \"react\";\nimport type Animated from \"react-native-reanimated\";\nimport {\n  runOnJS,\n  useAnimatedReaction,\n  useSharedValue,\n} from \"react-native-reanimated\";\n\nimport { Easing } from \"../constants\";\nimport type {\n  TCarouselActionOptions,\n  TCarouselProps,\n  WithTimingAnimation,\n} from \"../types\";\nimport { computedRealIndexWithAutoFillData, convertToSharedIndex } from \"../utils/computed-with-auto-fill-data\";\nimport { dealWithAnimation } from \"../utils/deal-with-animation\";\nimport { handlerOffsetDirection } from \"../utils/handleroffset-direction\";\nimport { round } from \"../utils/log\";\n\ninterface IOpts {\n  loop: boolean\n  size: number\n  dataLength: number\n  handlerOffset: Animated.SharedValue<number>\n  autoFillData: TCarouselProps[\"autoFillData\"]\n  withAnimation?: TCarouselProps[\"withAnimation\"]\n  fixedDirection?: TCarouselProps[\"fixedDirection\"]\n  duration?: number\n  defaultIndex?: number\n  onScrollStart?: () => void\n  onScrollEnd?: () => void\n}\n\nexport interface ICarouselController {\n  getSharedIndex: () => number\n  prev: (opts?: TCarouselActionOptions) => void\n  next: (opts?: TCarouselActionOptions) => void\n  getCurrentIndex: () => number\n  scrollTo: (opts?: TCarouselActionOptions) => void\n}\n\nexport function useCarouselController(options: IOpts): ICarouselController {\n  const {\n    size,\n    loop,\n    dataLength,\n    handlerOffset,\n    withAnimation,\n    defaultIndex = 0,\n    duration,\n    autoFillData,\n    fixedDirection,\n  } = options;\n\n  const dataInfo = React.useMemo(\n    () => ({\n      length: dataLength,\n      disable: !dataLength,\n      originalLength: dataLength,\n    }),\n    [dataLength],\n  );\n\n  const index = useSharedValue<number>(defaultIndex);\n  // The Index displayed to the user\n  const sharedIndex = useRef<number>(defaultIndex);\n  const sharedPreIndex = useRef<number>(defaultIndex);\n\n  const currentFixedPage = React.useCallback(() => {\n    if (loop)\n      return -Math.round(handlerOffset.value / size);\n\n    const fixed = (handlerOffset.value / size) % dataInfo.length;\n    return Math.round(\n      handlerOffset.value <= 0\n        ? Math.abs(fixed)\n        : Math.abs(fixed > 0 ? dataInfo.length - fixed : 0),\n    );\n  }, [handlerOffset, dataInfo, size, loop]);\n\n  function setSharedIndex(newSharedIndex: number) {\n    sharedIndex.current = newSharedIndex;\n  }\n\n  useAnimatedReaction(\n    () => {\n      const handlerOffsetValue = handlerOffset.value;\n      const toInt = round(handlerOffsetValue / size) % dataInfo.length;\n      const isPositive = handlerOffsetValue <= 0;\n      const i = isPositive\n        ? Math.abs(toInt)\n        : Math.abs(toInt > 0 ? dataInfo.length - toInt : 0);\n\n      const newSharedIndexValue = convertToSharedIndex({\n        loop,\n        rawDataLength: dataInfo.originalLength,\n        autoFillData: autoFillData!,\n        index: i,\n      });\n\n      return {\n        i,\n        newSharedIndexValue,\n      };\n    },\n    ({ i, newSharedIndexValue }) => {\n      index.value = i;\n      runOnJS(setSharedIndex)(newSharedIndexValue);\n    },\n    [\n      sharedPreIndex,\n      sharedIndex,\n      size,\n      dataInfo,\n      index,\n      loop,\n      autoFillData,\n      handlerOffset,\n    ],\n  );\n\n  const getCurrentIndex = React.useCallback(() => {\n    const realIndex = computedRealIndexWithAutoFillData({\n      index: index.value,\n      dataLength: dataInfo.originalLength,\n      loop,\n      autoFillData: autoFillData!,\n    });\n\n    return realIndex;\n  }, [index, autoFillData, dataInfo, loop]);\n\n  const canSliding = React.useCallback(() => {\n    return !dataInfo.disable;\n  }, [dataInfo]);\n\n  const onScrollEnd = React.useCallback(() => {\n    options.onScrollEnd?.();\n  }, [options]);\n\n  const onScrollStart = React.useCallback(() => {\n    options.onScrollStart?.();\n  }, [options]);\n\n  const scrollWithTiming = React.useCallback(\n    (toValue: number, onFinished?: () => void) => {\n      \"worklet\";\n      const callback = (isFinished: boolean) => {\n        \"worklet\";\n        if (isFinished) {\n          runOnJS(onScrollEnd)();\n          onFinished && runOnJS(onFinished)();\n        }\n      };\n\n      const defaultWithAnimation: WithTimingAnimation = {\n        type: \"timing\",\n        config: { duration, easing: Easing.easeOutQuart },\n      };\n\n      return dealWithAnimation(withAnimation ?? defaultWithAnimation)(\n        toValue,\n        callback,\n      );\n    },\n    [duration, withAnimation, onScrollEnd],\n  );\n\n  const next = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      \"worklet\";\n      const { count = 1, animated = true, onFinished } = opts;\n      if (!canSliding() || (!loop && index.value >= dataInfo.length - 1))\n        return;\n\n      onScrollStart?.();\n\n      const nextPage = currentFixedPage() + count;\n      index.value = nextPage;\n\n      if (animated) {\n        handlerOffset.value = scrollWithTiming(\n          -nextPage * size,\n          onFinished,\n        ) as any;\n      }\n      else {\n        handlerOffset.value = -nextPage * size;\n        onFinished?.();\n      }\n    },\n    [\n      canSliding,\n      loop,\n      index,\n      dataInfo,\n      onScrollStart,\n      handlerOffset,\n      size,\n      scrollWithTiming,\n      currentFixedPage,\n    ],\n  );\n\n  const prev = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      const { count = 1, animated = true, onFinished } = opts;\n      if (!canSliding() || (!loop && index.value <= 0)) return;\n\n      onScrollStart?.();\n\n      const prevPage = currentFixedPage() - count;\n      index.value = prevPage;\n\n      if (animated) {\n        handlerOffset.value = scrollWithTiming(\n          -prevPage * size,\n          onFinished,\n        );\n      }\n      else {\n        handlerOffset.value = -prevPage * size;\n        onFinished?.();\n      }\n    },\n    [\n      canSliding,\n      loop,\n      index,\n      onScrollStart,\n      handlerOffset,\n      size,\n      scrollWithTiming,\n      currentFixedPage,\n    ],\n  );\n\n  const to = React.useCallback(\n    (opts: { i: number; animated: boolean; onFinished?: () => void }) => {\n      const { i, animated = false, onFinished } = opts;\n      if (i === index.value) return;\n      if (!canSliding()) return;\n\n      onScrollStart?.();\n      // direction -> 1 | -1\n      const direction = handlerOffsetDirection(handlerOffset, fixedDirection);\n\n      // target offset\n      const offset = i * size * direction;\n      // page width size * page count\n      const totalSize = dataInfo.length * size;\n\n      let isCloseToNextLoop = false;\n\n      if (loop) {\n        isCloseToNextLoop\n          = Math.abs(handlerOffset.value % totalSize) / totalSize\n          >= 0.5;\n      }\n\n      const finalOffset\n        = (Math.floor(Math.abs(handlerOffset.value / totalSize))\n          + (isCloseToNextLoop ? 1 : 0))\n        * totalSize\n        * direction\n        + offset;\n\n      if (animated) {\n        index.value = i;\n        handlerOffset.value = scrollWithTiming(finalOffset, onFinished);\n      }\n      else {\n        handlerOffset.value = finalOffset;\n        index.value = i;\n        onFinished?.();\n      }\n    },\n    [\n      size,\n      loop,\n      index,\n      fixedDirection,\n      handlerOffset,\n      dataInfo.length,\n      canSliding,\n      onScrollStart,\n      scrollWithTiming,\n    ],\n  );\n\n  const scrollTo = React.useCallback(\n    (opts: TCarouselActionOptions = {}) => {\n      const { index: i, count, animated = false, onFinished } = opts;\n      if (typeof i === \"number\" && i > -1) {\n        to({ i, animated, onFinished });\n        return;\n      }\n\n      if (!count)\n        return;\n\n      const n = Math.round(count);\n\n      if (n < 0)\n        prev({ count: Math.abs(n), animated, onFinished });\n\n      else\n        next({ count: n, animated, onFinished });\n    },\n    [prev, next, to],\n  );\n\n  return {\n    next,\n    prev,\n    scrollTo,\n    getCurrentIndex,\n    getSharedIndex: () => sharedIndex.current,\n  };\n}\n"],"mappings":"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","ignoreList":[]}