{"version":3,"names":["React","StyleSheet","GestureHandlerRootView","runOnJS","useDerivedValue","ItemRenderer","ScrollViewGesture","useAutoPlay","useCarouselController","useCommonVariables","useInitProps","useLayoutConfig","useOnProgressChange","usePropsErrorBoundary","CTX","computedRealIndexWithAutoFillData","Carousel","forwardRef","_props","ref","props","testID","loop","autoFillData","data","dataLength","rawDataLength","mode","style","width","height","vertical","autoPlay","windowSize","autoPlayReverse","autoPlayInterval","scrollAnimationDuration","withAnimation","fixedDirection","renderItem","onScrollEnd","onSnapToItem","onScrollStart","onProgressChange","customAnimation","defaultIndex","accessibilityActions","accessibilityLabel","accessibilityRole","accessible","onAccessibilityAction","commonVariables","size","handlerOffset","offsetX","totalSize","x","value","isNaN","progressValue","carouselController","duration","_onScrollEnd","next","prev","scrollTo","getSharedIndex","getCurrentIndex","start","startAutoPlay","pause","pauseAutoPlay","useCallback","_sharedIndex","Math","round","realIndex","index","scrollViewGestureOnScrollStart","scrollViewGestureOnScrollEnd","scrollViewGestureOnTouchBegin","scrollViewGestureOnTouchEnd","useImperativeHandle","layoutConfig","createElement","Provider","common","key","translation","styles","container","itemsVertical","itemsHorizontal","onTouchBegin","onTouchEnd","create","overflow","flexDirection"],"sources":["Carousel.tsx"],"sourcesContent":["import React from \"react\";\nimport { StyleSheet } from \"react-native\";\nimport { GestureHandlerRootView } from \"react-native-gesture-handler\";\nimport { runOnJS, useDerivedValue } from \"react-native-reanimated\";\n\nimport { ItemRenderer } from \"./ItemRenderer\";\nimport { ScrollViewGesture } from \"./ScrollViewGesture\";\n\nimport { useAutoPlay } from \"../hooks/useAutoPlay\";\nimport { useCarouselController } from \"../hooks/useCarouselController\";\nimport { useCommonVariables } from \"../hooks/useCommonVariables\";\nimport { useInitProps } from \"../hooks/useInitProps\";\nimport { useLayoutConfig } from \"../hooks/useLayoutConfig\";\nimport { useOnProgressChange } from \"../hooks/useOnProgressChange\";\nimport { usePropsErrorBoundary } from \"../hooks/usePropsErrorBoundary\";\nimport { CTX } from \"../store\";\nimport type { ICarouselInstance, TCarouselProps } from \"../types\";\nimport { computedRealIndexWithAutoFillData } from \"../utils/computed-with-auto-fill-data\";\n\nconst Carousel = React.forwardRef<ICarouselInstance, TCarouselProps<any>>(\n  (_props, ref) => {\n    const props = useInitProps(_props);\n\n    const {\n      testID,\n      loop,\n      autoFillData,\n      // Fill data with autoFillData\n      data,\n      // Length of fill data\n      dataLength,\n      // Length of raw data\n      rawDataLength,\n      mode,\n      style,\n      width,\n      height,\n      vertical,\n      autoPlay,\n      windowSize,\n      autoPlayReverse,\n      autoPlayInterval,\n      scrollAnimationDuration,\n      withAnimation,\n      fixedDirection,\n      renderItem,\n      onScrollEnd,\n      onSnapToItem,\n      onScrollStart,\n      onProgressChange,\n      customAnimation,\n      defaultIndex,\n      accessibilityActions,\n      accessibilityLabel,\n      accessibilityRole,\n      accessible,\n      onAccessibilityAction,\n    } = props;\n\n    const commonVariables = useCommonVariables(props);\n    const { size, handlerOffset } = commonVariables;\n\n    const offsetX = useDerivedValue(() => {\n      const totalSize = size * dataLength;\n      const x = handlerOffset.value % totalSize;\n\n      if (!loop) return handlerOffset.value;\n\n      return isNaN(x) ? 0 : x;\n    }, [loop, size, dataLength]);\n\n    usePropsErrorBoundary({ ...props, dataLength });\n    const progressValue = useOnProgressChange({\n      autoFillData,\n      loop,\n      size,\n      offsetX,\n      rawDataLength,\n      onProgressChange,\n    });\n\n    const carouselController = useCarouselController({\n      loop,\n      size,\n      dataLength,\n      autoFillData,\n      handlerOffset,\n      withAnimation,\n      defaultIndex,\n      fixedDirection,\n      duration: scrollAnimationDuration,\n      onScrollEnd: () => runOnJS(_onScrollEnd)(),\n      onScrollStart: () => !!onScrollStart && runOnJS(onScrollStart)(),\n    });\n\n    const { next, prev, scrollTo, getSharedIndex, getCurrentIndex } =\n      carouselController;\n\n    const { start: startAutoPlay, pause: pauseAutoPlay } = useAutoPlay({\n      autoPlay,\n      autoPlayInterval,\n      autoPlayReverse,\n      carouselController,\n    });\n\n    const _onScrollEnd = React.useCallback(() => {\n      const _sharedIndex = Math.round(getSharedIndex());\n\n      const realIndex = computedRealIndexWithAutoFillData({\n        index: _sharedIndex,\n        dataLength: rawDataLength,\n        loop,\n        autoFillData,\n      });\n\n      if (onSnapToItem) onSnapToItem(realIndex);\n\n      if (onScrollEnd) onScrollEnd(realIndex);\n    }, [\n      loop,\n      autoFillData,\n      rawDataLength,\n      getSharedIndex,\n      onSnapToItem,\n      onScrollEnd,\n    ]);\n\n    const scrollViewGestureOnScrollStart = React.useCallback(() => {\n      pauseAutoPlay();\n      onScrollStart?.();\n    }, [onScrollStart, pauseAutoPlay]);\n\n    const scrollViewGestureOnScrollEnd = React.useCallback(() => {\n      startAutoPlay();\n      _onScrollEnd();\n    }, [_onScrollEnd, startAutoPlay]);\n\n    const scrollViewGestureOnTouchBegin = React.useCallback(pauseAutoPlay, [\n      pauseAutoPlay,\n    ]);\n\n    const scrollViewGestureOnTouchEnd = React.useCallback(startAutoPlay, [\n      startAutoPlay,\n    ]);\n\n    React.useImperativeHandle(\n      ref,\n      () => ({\n        next,\n        prev,\n        getCurrentIndex,\n        scrollTo,\n        progressValue,\n      }),\n      [getCurrentIndex, next, prev, scrollTo],\n    );\n\n    const layoutConfig = useLayoutConfig({ ...props, size });\n\n    return (\n      <GestureHandlerRootView>\n        <CTX.Provider value={{ props, common: commonVariables }}>\n          <ScrollViewGesture\n            key={mode}\n            size={size}\n            translation={handlerOffset}\n            style={[\n              styles.container,\n              {\n                width: width || \"100%\",\n                height: height || \"100%\",\n              },\n              style,\n              vertical ? styles.itemsVertical : styles.itemsHorizontal,\n            ]}\n            testID={testID}\n            onScrollStart={scrollViewGestureOnScrollStart}\n            onScrollEnd={scrollViewGestureOnScrollEnd}\n            onTouchBegin={scrollViewGestureOnTouchBegin}\n            onTouchEnd={scrollViewGestureOnTouchEnd}\n            accessibilityActions={accessibilityActions}\n            accessibilityLabel={accessibilityLabel}\n            accessibilityRole={accessibilityRole}\n            accessible={accessible}\n            onAccessibilityAction={onAccessibilityAction}\n          >\n            <ItemRenderer\n              data={data}\n              dataLength={dataLength}\n              rawDataLength={rawDataLength}\n              loop={loop}\n              size={size}\n              windowSize={windowSize}\n              autoFillData={autoFillData}\n              offsetX={offsetX}\n              handlerOffset={handlerOffset}\n              layoutConfig={layoutConfig}\n              renderItem={renderItem}\n              customAnimation={customAnimation}\n            />\n          </ScrollViewGesture>\n        </CTX.Provider>\n      </GestureHandlerRootView>\n    );\n  },\n);\n\nexport default Carousel as <T extends any>(\n  props: React.PropsWithChildren<TCarouselProps<T>>,\n) => React.ReactElement;\n\nconst styles = StyleSheet.create({\n  container: {\n    overflow: \"hidden\",\n  },\n  itemsHorizontal: {\n    flexDirection: \"row\",\n  },\n  itemsVertical: {\n    flexDirection: \"column\",\n  },\n});\n"],"mappings":"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","ignoreList":[]}