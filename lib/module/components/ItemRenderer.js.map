{"version":3,"names":["React","useAnimatedReaction","runOnJS","BaseLayout","useVisibleRanges","computedRealIndexWithAutoFillData","ItemRenderer","props","data","size","windowSize","handlerOffset","offsetX","dataLength","rawDataLength","loop","autoFillData","layoutConfig","renderItem","customAnimation","visibleRanges","total","viewSize","translation","displayedItems","setDisplayedItems","useState","value","ranges","createElement","Fragment","map","item","index","realIndex","negativeRange","positiveRange","shouldRender","key","animationStyle","animationValue"],"sources":["ItemRenderer.tsx"],"sourcesContent":["import React from \"react\";\nimport type { FC } from \"react\";\nimport type { ViewStyle } from \"react-native\";\nimport type Animated from \"react-native-reanimated\";\nimport { useAnimatedReaction, type AnimatedStyleProp, runOnJS } from \"react-native-reanimated\";\n\nimport type { TAnimationStyle } from \"./BaseLayout\";\nimport { BaseLayout } from \"./BaseLayout\";\n\nimport type { VisibleRanges } from \"../hooks/useVisibleRanges\";\nimport { useVisibleRanges } from \"../hooks/useVisibleRanges\";\nimport type { CarouselRenderItem } from \"../types\";\nimport { computedRealIndexWithAutoFillData } from \"../utils/computed-with-auto-fill-data\";\n\ninterface Props {\n  data: any[]\n  dataLength: number\n  rawDataLength: number\n  loop: boolean\n  size: number\n  windowSize?: number\n  autoFillData: boolean\n  offsetX: Animated.SharedValue<number>\n  handlerOffset: Animated.SharedValue<number>\n  layoutConfig: TAnimationStyle\n  renderItem: CarouselRenderItem<any>\n  customAnimation?: ((value: number) => AnimatedStyleProp<ViewStyle>)\n}\n\nexport const ItemRenderer: FC<Props> = (props) => {\n  const {\n    data,\n    size,\n    windowSize,\n    handlerOffset,\n    offsetX,\n    dataLength,\n    rawDataLength,\n    loop,\n    autoFillData,\n    layoutConfig,\n    renderItem,\n    customAnimation,\n  } = props;\n\n  const visibleRanges = useVisibleRanges({\n    total: dataLength,\n    viewSize: size,\n    translation: handlerOffset,\n    windowSize,\n    loop,\n  });\n\n  const [displayedItems, setDisplayedItems] = React.useState<VisibleRanges>(null!);\n\n  useAnimatedReaction(\n    () => visibleRanges.value,\n    ranges => runOnJS(setDisplayedItems)(ranges),\n    [visibleRanges],\n  );\n\n  if (!displayedItems)\n    return null;\n\n  return (\n    <>\n      {\n        data.map((item, index) => {\n          const realIndex = computedRealIndexWithAutoFillData({\n            index,\n            dataLength: rawDataLength,\n            loop,\n            autoFillData,\n          });\n\n          const { negativeRange, positiveRange } = displayedItems;\n\n          const shouldRender = (index >= negativeRange[0] && index <= negativeRange[1])\n          || (index >= positiveRange[0] && index <= positiveRange[1]);\n\n          if (!shouldRender)\n            return null;\n\n          return (\n            <BaseLayout\n              key={index}\n              index={index}\n              handlerOffset={offsetX}\n              visibleRanges={visibleRanges}\n              animationStyle={customAnimation || layoutConfig}\n            >\n              {({ animationValue }) =>\n                renderItem({\n                  item,\n                  index: realIndex,\n                  animationValue,\n                })\n              }\n            </BaseLayout>\n          );\n        })\n      }\n    </>\n  );\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAIzB,SAASC,mBAAmB,EAA0BC,OAAO,QAAQ,yBAAyB;AAG9F,SAASC,UAAU,QAAQ,cAAc;AAGzC,SAASC,gBAAgB,QAAQ,2BAA2B;AAE5D,SAASC,iCAAiC,QAAQ,uCAAuC;AAiBzF,OAAO,MAAMC,YAAuB,GAAIC,KAAK,IAAK;EAChD,MAAM;IACJC,IAAI;IACJC,IAAI;IACJC,UAAU;IACVC,aAAa;IACbC,OAAO;IACPC,UAAU;IACVC,aAAa;IACbC,IAAI;IACJC,YAAY;IACZC,YAAY;IACZC,UAAU;IACVC;EACF,CAAC,GAAGZ,KAAK;EAET,MAAMa,aAAa,GAAGhB,gBAAgB,CAAC;IACrCiB,KAAK,EAAER,UAAU;IACjBS,QAAQ,EAAEb,IAAI;IACdc,WAAW,EAAEZ,aAAa;IAC1BD,UAAU;IACVK;EACF,CAAC,CAAC;EAEF,MAAM,CAACS,cAAc,EAAEC,iBAAiB,CAAC,GAAGzB,KAAK,CAAC0B,QAAQ,CAAgB,IAAK,CAAC;EAEhFzB,mBAAmB,CACjB,MAAMmB,aAAa,CAACO,KAAK,EACzBC,MAAM,IAAI1B,OAAO,CAACuB,iBAAiB,CAAC,CAACG,MAAM,CAAC,EAC5C,CAACR,aAAa,CAChB,CAAC;EAED,IAAI,CAACI,cAAc,EACjB,OAAO,IAAI;EAEb,oBACExB,KAAA,CAAA6B,aAAA,CAAA7B,KAAA,CAAA8B,QAAA,QAEItB,IAAI,CAACuB,GAAG,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK;IACxB,MAAMC,SAAS,GAAG7B,iCAAiC,CAAC;MAClD4B,KAAK;MACLpB,UAAU,EAAEC,aAAa;MACzBC,IAAI;MACJC;IACF,CAAC,CAAC;IAEF,MAAM;MAAEmB,aAAa;MAAEC;IAAc,CAAC,GAAGZ,cAAc;IAEvD,MAAMa,YAAY,GAAIJ,KAAK,IAAIE,aAAa,CAAC,CAAC,CAAC,IAAIF,KAAK,IAAIE,aAAa,CAAC,CAAC,CAAC,IACxEF,KAAK,IAAIG,aAAa,CAAC,CAAC,CAAC,IAAIH,KAAK,IAAIG,aAAa,CAAC,CAAC,CAAE;IAE3D,IAAI,CAACC,YAAY,EACf,OAAO,IAAI;IAEb,oBACErC,KAAA,CAAA6B,aAAA,CAAC1B,UAAU;MACTmC,GAAG,EAAEL,KAAM;MACXA,KAAK,EAAEA,KAAM;MACbtB,aAAa,EAAEC,OAAQ;MACvBQ,aAAa,EAAEA,aAAc;MAC7BmB,cAAc,EAAEpB,eAAe,IAAIF;IAAa,GAE/C,CAAC;MAAEuB;IAAe,CAAC,KAClBtB,UAAU,CAAC;MACTc,IAAI;MACJC,KAAK,EAAEC,SAAS;MAChBM;IACF,CAAC,CAEO,CAAC;EAEjB,CAAC,CAEH,CAAC;AAEP,CAAC","ignoreList":[]}